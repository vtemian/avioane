// Generated by CoffeeScript 1.3.1
(function() {
  var socket;

  socket = io.connect("http://localhost:5555");

  $(document).ready(function() {
    return $("#submit").click(function() {
      var battle, id, username;
      username = $("#user").val();
      id = $('#id-user').val();
      battle = new Battle({
        'squareHeight': 30,
        'gameHolder': $('#gameHolder')
      });
      $("#connection").html("waiting!");
      socket.emit("lobby-registration", {
        username: username,
        id: id
      });
      socket.on("online", function(data) {
        online += 1;
        return $("#online").html(data);
      });
      socket.on("start-battle", function(data) {
        $("#game").css("display", "block");
        return battle.init();
      });
      $("#start").click(function() {
        return socket.emit("new-battle", {
          firstUser: 0,
          secondUser: 1,
          battleId: 0
        });
      });
      return $("#ready").click(function() {
        var checked, war;
        checked = battle.checkReady();
        if (checked) {
          return war = new War({
            'user': 0,
            'battleID': 0,
            'userSocket': socket,
            'mapCanvas': checked
          });
        }
      });
    });
  });

}).call(this);
